<!--<app-answer-marking [answercode]="evaluationData.answerdata[0].answercode" [totalexammarks]="assignment.totalExamMarks"></app-answer-marking>-->
<alert></alert>
<div class="container-fluid" style="margin-top:10px;">
    <div class="float-right">
        <span style="margin-right:5px"><button class="btn btn-success" (click)="validateAndSave('N')" [disabled]="disableSaveButton">Save</button></span>
        <span><button class="btn btn-success" (click)="validateAndSave('Y')" [disabled]="disableSaveButton">Save & Submit</button></span>
    </div>

    <div class="row">
        <div class="col-lg-4 col-md-4 col-sm-6">
            <div class="row">
                <div class="col-lg-4 col-sm-12 col-md-3">

                    <h5>Total Marks : {{totalMarks}}</h5>
                </div>
                <div class="col-lg-8 col-sm-12 col-md-8" style="text-align:right">

                    <h6>Answer Code :{{answerCode}}</h6>
                </div>
            </div>

            <div class="row">
                <div class="col-lg-12 col-sm-12 col-md-12">
                    Obtainted Marks :
                    <span [ngClass]="{ 'green-text':totalObtainedMarks > 30,'red-text':totalObtainedMarks <= 30  }">{{totalObtainedMarks}}</span>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-lg-4 col-md-4 col-sm-12">
            
            <div [hidden]="validation" class="error text-right">Obtained marks cannot be more than total marks</div>

            <div style="overflow-y:auto;max-height:80vh;margin-top:10px; ">
                <div *ngFor="let question of questionData" style="border:2px solid darkgray;">

                    <div>
                        <table class="table-bordered" style="width:100%;">
                            <tr>
                                <th class="text-center" width="25%">Question #</th>
                                <th class="text-center" width="25%">Total Marks</th>
                                <th class="text-center" width="25%">Marks Obtained</th>
                                <th class="text-center" width="25%">View Question</th>
                            </tr>
                            <tr>
                                <td class="text-center">{{question.questionno}}</td>
                                <td class="text-center">{{question.totalmarks}}</td>
                                <td class="text-center">
                                    <input type="number" step="0.25" class="form-control" [(ngModel)]="question.marksobtained" (input)="setTotalMarks(question.totalmarks)"
                                        [ngClass]="{ 'is-green success':question.marksobtained > 0,'is-red error':question.marksobtained <= 0, 'is-red error':question.marksobtained > question.totalmarks  }">
                                </td>
                                <td class="text-center">View</td>
                            </tr>
                        </table>
                        <table class="table-bordered" style="background-color: #e2e2e2; width:100%" *ngIf="(question.sections && question.sections.length > 0)">
                            <tr>
                                <th class="sub-header" width="25%">Sub Question #</th>
                                <th class="sub-header" width="25%">Sub Question Marks</th>
                                <th class="sub-header" width="25%">Marks Obtained</th>
                                <th class="sub-header" width="25%"></th>

                            </tr>
                            <tr *ngFor="let subquestion of question.sections">
                                <td class="text-center">{{subquestion.subquestionid}}</td>
                                <td class="text-center">{{subquestion.subquestionmarks}}</td>
                                <td class="text-center">
                                    <input type="number"  step="0.25"  class="form-control" [(ngModel)]="subquestion.marksobtained" (input)="setTotalMarks(subquestion.subquestionmarks)"
                                        [ngClass]="{ 'is-green':subquestion.marksobtained > 0,'is-red':subquestion.marksobtained <= 0  }">
                                </td>
                                <td class="text-center">View</td>
                            </tr>
                        </table>
                    </div>

                </div>

                <pre>{{questionData | json}}</pre>
            </div>




        </div>
        <div class="col-lg-8 col-md-8 col-sm-12">
            <br>
            <div style="overflow-y: auto; max-height:80vh;margin-top:-10px">
                <pdf-viewer [show-borders]="true" [src]="answerpdf" [render-text]="true" style="overflow-y:hidden"></pdf-viewer>
            </div>
        </div>




    </div>


</div>